# HSE NCHD Rostering System - Frontend Setup Guide

## ðŸ“ Complete File Structure

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ atoms/
â”‚   â”‚   â”‚   â”œâ”€â”€ Badge.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Checkbox.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Input.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchInput.jsx
â”‚   â”‚   â”‚   â””â”€â”€ Select.jsx
â”‚   â”‚   â”œâ”€â”€ molecules/
â”‚   â”‚   â”‚   â”œâ”€â”€ AlertBanner.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.jsx
â”‚   â”‚   â”‚   â””â”€â”€ PostCard.jsx
â”‚   â”‚   â”œâ”€â”€ organisms/
â”‚   â”‚   â”‚   â”œâ”€â”€ CSVImportModal.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DragDropCalendar.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Navigation.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PostForm.jsx
â”‚   â”‚   â”‚   â””â”€â”€ ShiftForm.jsx
â”‚   â”‚   â””â”€â”€ views/
â”‚   â”‚       â”œâ”€â”€ DashboardView.jsx
â”‚   â”‚       â”œâ”€â”€ PostsView.jsx
â”‚   â”‚       â””â”€â”€ RosterView.jsx
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ api.js
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ colors.js
â”‚   â”‚   â”œâ”€â”€ constants.js
â”‚   â”‚   â”œâ”€â”€ hooks.js
â”‚   â”‚   â””â”€â”€ sanitize.js
â”‚   â”œâ”€â”€ App.jsx
â”‚   â”œâ”€â”€ ErrorBoundary.jsx
â”‚   â”œâ”€â”€ index.css
â”‚   â””â”€â”€ main.jsx
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ .env.example
â”œâ”€â”€ .eslintrc.cjs
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â””â”€â”€ README.md
```

**Total: 30 files**

---

## ðŸš€ Quick Start

### 1. Create Directory Structure
```bash
cd frontend/src
mkdir -p components/{atoms,molecules,organisms,views} services utils
```

### 2. Install Dependencies
```bash
cd frontend
npm install
```

### 3. Environment Setup
```bash
cp .env.example .env
# Edit .env with your API URL
```

### 4. Run Development Server
```bash
npm run dev
```

Frontend will be available at: http://localhost:5173

---

## ðŸ“¦ Dependencies

### Production Dependencies
```json
{
  "react": "^18.2.0",
  "react-dom": "^18.2.0",
  "lucide-react": "^0.263.1"
}
```

### Development Dependencies
```json
{
  "@vitejs/plugin-react": "^4.2.1",
  "vite": "^5.0.8",
  "eslint": "^8.55.0",
  "eslint-plugin-react": "^7.33.2",
  "eslint-plugin-react-hooks": "^4.6.0"
}
```

### Optional Production Libraries (Recommended)
```bash
# For robust CSV parsing
npm install papaparse
npm install @types/papaparse --save-dev

# For input sanitization
npm install dompurify
npm install @types/dompurify --save-dev

# For date handling
npm install date-fns
```

---

## ðŸ”§ Configuration Files

### package.json
Located in artifacts as "frontend-files-part4"

### vite.config.js
Located in artifacts as "frontend-files-part4"

### .eslintrc.cjs
Located in artifacts as "frontend-files-part4"

### .env.example
```
REACT_APP_API_BASE=http://localhost/api
```

---

## ðŸ“ File Mapping Guide

### Part 1: Utilities & Atoms (6 files)
**Artifact: Not yet created separately**

Files to create:
- `src/utils/colors.js` - Color palette
- `src/utils/constants.js` - Size constants, API config
- `src/utils/sanitize.js` - Input sanitization
- `src/utils/hooks.js` - Custom React hooks
- `src/components/atoms/Button.jsx`
- `src/components/atoms/Input.jsx`
- `src/components/atoms/Select.jsx`
- `src/components/atoms/Checkbox.jsx`
- `src/components/atoms/Badge.jsx`
- `src/components/atoms/SearchInput.jsx`

### Part 2: Molecules (3 files)
Files to create:
- `src/components/molecules/Modal.jsx`
- `src/components/molecules/AlertBanner.jsx`
- `src/components/molecules/PostCard.jsx`

### Part 3: Organisms & Views
**Artifact: frontend-files-part2**

Files to create:
- `src/components/organisms/PostForm.jsx`
- `src/components/organisms/ShiftForm.jsx`
- `src/components/organisms/CSVImportModal.jsx`

**Artifact: frontend-files-part3**

Files to create:
- `src/components/organisms/DragDropCalendar.jsx`
- `src/components/organisms/Header.jsx`
- `src/components/organisms/Navigation.jsx`
- `src/components/organisms/Footer.jsx`
- `src/components/views/DashboardView.jsx`
- `src/components/views/PostsView.jsx`
- `src/components/views/RosterView.jsx`

### Part 4: App, Services & Config
**Artifact: frontend-files-part4**

Files to create:
- `src/services/api.js`
- `src/ErrorBoundary.jsx`
- `src/App.jsx`
- `src/main.jsx`
- `src/index.css`
- `public/index.html`
- `package.json`
- `vite.config.js`
- `.eslintrc.cjs`
- `README.md`

---

## ðŸ”„ Integration with Backend

### Update API Base URL
Edit `.env`:
```
REACT_APP_API_BASE=http://localhost/api
```

### Enable Real API Calls
In `src/App.jsx`, uncomment these lines:
```javascript
// Line ~45
const [postsData, shiftsData] = await Promise.all([
  postsApi.getAll(),
  rosterApi.getShifts(), // â† Uncomment this
]);

// Line ~49
setShifts(shiftsData); // â† Uncomment this

// Remove or comment out mock data (lines 52-56)
```

### API Endpoints Used
- `GET /api/posts` - List all posts
- `POST /api/posts` - Create post
- `PUT /api/posts/:id` - Update post
- `DELETE /api/posts/:id` - Delete post
- `GET /api/roster/shifts` - List shifts
- `POST /api/roster/shifts` - Create shift
- `POST /api/roster/generate` - Generate roster

---

## âœ… Features Implemented

### Core Functionality
- âœ… Post management (CRUD)
- âœ… Shift management (CRUD)
- âœ… CSV import with validation
- âœ… Drag & drop roster calendar
- âœ… Real-time EWTD validation
- âœ… Search filtering

### User Experience
- âœ… Loading states
- âœ… Error boundaries
- âœ… Toast notifications
- âœ… Empty states
- âœ… Confirmation dialogs

### Accessibility
- âœ… Full keyboard navigation
- âœ… ARIA labels
- âœ… Screen reader support
- âœ… Focus management
- âœ… Color contrast compliance (WCAG AA)

### Performance
- âœ… Debounced search
- âœ… Memoized calculations
- âœ… Optimized re-renders

---

## ðŸ§ª Testing Checklist

### Manual Testing
- [ ] Create a post
- [ ] Edit a post
- [ ] Delete a post
- [ ] Create a shift with EWTD validation
- [ ] Drag & drop shift in calendar
- [ ] Use keyboard to move shifts (Space, Arrows, Enter)
- [ ] Import CSV file
- [ ] Search for posts
- [ ] Test all navigation tabs
- [ ] Test modals (open, close, Escape key)
- [ ] Test error scenarios

### Accessibility Testing
- [ ] Navigate entire app with keyboard only
- [ ] Test with screen reader (NVDA/JAWS)
- [ ] Check color contrast
- [ ] Verify all images have alt text
- [ ] Test focus indicators

### Browser Testing
- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Edge

---

## ðŸ› Common Issues & Solutions

### Issue: Module not found
```
Solution: Ensure all imports use correct relative paths
Check: import paths match file structure
```

### Issue: API calls failing
```
Solution: Check CORS configuration in backend
Verify: .env file has correct API_BASE URL
```

### Issue: Styles not applying
```
Solution: Ensure index.css is imported in main.jsx
Check: Tailwind classes are in safelist if using JIT
```

### Issue: Hot reload not working
```
Solution: Restart Vite dev server
Check: vite.config.js HMR settings
```

---

## ðŸ“š Code Conventions

### Import Order
1. React & React libraries
2. External libraries
3. Internal components (atoms â†’ molecules â†’ organisms)
4. Utils & constants
5. Styles

### Component Structure
```javascript
// 1. Imports
import React from 'react';

// 2. Component definition
export const MyComponent = ({ prop1, prop2 }) => {
  // 3. Hooks
  const [state, setState] = useState();
  
  // 4. Event handlers
  const handleClick = () => {};
  
  // 5. Render
  return (
    <div>...</div>
  );
};
```

### Naming Conventions
- Components: PascalCase (Button.jsx)
- Utils: camelCase (sanitize.js)
- Constants: SCREAMING_SNAKE_CASE
- CSS classes: kebab-case

---

## ðŸš¢ Deployment

### Build for Production
```bash
npm run build
```

Output will be in `dist/` folder

### Preview Production Build
```bash
npm run preview
```

### Deploy to Static Hosting
The `dist/` folder can be deployed to:
- Netlify
- Vercel
- AWS S3 + CloudFront
- GitHub Pages

### Environment Variables for Production
Ensure production `.env` has:
```
REACT_APP_API_BASE=https://your-production-api.com/api
```

---

## ðŸ” Security Checklist

- [ ] Replace `sanitizeInput` with DOMPurify
- [ ] Implement CSRF token handling
- [ ] Add authentication (JWT/OAuth)
- [ ] Enable HTTPS in production
- [ ] Validate all user inputs
- [ ] Set proper CORS policies
- [ ] Add rate limiting on API calls
- [ ] Implement proper error handling (no stack traces to users)

---

## ðŸ“ˆ Performance Optimization

### Already Implemented
- Debounced search
- Memoized calculations (useMemo)
- Optimized callbacks (useCallback)
- Lazy loading ready

### Future Optimizations
```javascript
// Code splitting
const DashboardView = React.lazy(() => import('./components/views/DashboardView'));

// Image optimization
// Use next-gen formats (WebP)

// Bundle analysis
npm run build -- --mode analyze
```

---

## ðŸŽ¨ Customization

### Change Colors
Edit `src/utils/colors.js`:
```javascript
export const colors = {
  primary: '#YOUR_COLOR',
  // ...
};
```

### Add New Views
1. Create view in `src/components/views/`
2. Add route to Navigation
3. Import in App.jsx
4. Add to view switching logic

### Add New API Endpoints
Edit `src/services/api.js`:
```javascript
export const myNewApi = {
  getData: () => apiCall('/my-endpoint'),
};
```

---

## ðŸ“ž Support

For issues or questions:
1. Check this documentation
2. Review error messages in browser console
3. Check backend API logs
4. Verify network requests in DevTools

---

## ðŸŽ¯ Next Steps

1. **Copy all files** from artifacts to your project
2. **Run `npm install`** in frontend directory
3. **Configure .env** with your API URL
4. **Start dev server** with `npm run dev`
5. **Test all features** using checklist above
6. **Connect to backend API** (uncomment lines in App.jsx)
7. **Deploy to production** when ready

---

## âœ¨ Credits

Built following:
- Atomic Design methodology
- HSE Design System principles
- WCAG 2.1 accessibility guidelines
- React best practices
